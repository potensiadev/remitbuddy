(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(9828)}])},9828:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var n=s(5893),r=s(7294);let a="https://sendhome.onrender.com",l=e=>{let{className:t}=e;return(0,n.jsx)("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})},o=e=>{let{className:t}=e;return(0,n.jsxs)("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16",stroke:"currentColor",children:[(0,n.jsx)("path",{strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M3.33301 8H12.6663"}),(0,n.jsx)("path",{strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M8 3.33331L12.6667 7.99998L8 12.6666"})]})},c={en:{title:"How much should your<br/>family receive?",subtitle:"We'll find the best exchange rate for you",amount_to_receive:"Amount to Receive",compare_button:"Find out the Best Rate",compare_again_button:"New Comparison",best_rate_badge:"Best Rate",real_time_summary:"Real-time Summary",loading_text:"Comparing rates...",fee:"Fee",error_title:"Oops! Something went wrong.",error_message:"We couldn't fetch the remittance data. Please try again later.",select_country_title:"Select Country",total_needed:"You Send (est.)"},ko:{title:"가족이 받을 금액은<br/>얼마인가요?",subtitle:"최고의 환율을 찾아드릴게요",amount_to_receive:"받는 금액",compare_button:"최고 환율 찾아보기",compare_again_button:"새로 비교하기",best_rate_badge:"최고 환율",real_time_summary:"실시간 비교 결과",loading_text:"환율을 비교 중입니다...",fee:"수수료",error_title:"오류가 발생했습니다.",error_message:"송금 정보를 가져오는 데 실패했습니다. 잠시 후 다시 시도해주세요.",select_country_title:"국가 선택",total_needed:"예상 총 필요 원화"}},i=e=>t=>{var s;return(null===(s=c[e])||void 0===s?void 0:s[t])||t},d=[{code:"VN",currency:"VND",name:"Vietnam",flag:"/images/flags/vn.png"},{code:"PH",currency:"PHP",name:"Philippines",flag:"/images/flags/ph.png"},{code:"KH",currency:"KHR",name:"Cambodia",flag:"/images/flags/kh.png"},{code:"MM",currency:"MMK",name:"Myanmar",flag:"/images/flags/mm.png"},{code:"TH",currency:"THB",name:"Thailand",flag:"/images/flags/th.png"},{code:"UZ",currency:"UZS",name:"Uzbekistan",flag:"/images/flags/uz.png"},{code:"ID",currency:"IDR",name:"Indonesia",flag:"/images/flags/id.png"},{code:"LK",currency:"LKR",name:"SriLanka",flag:"/images/flags/lk.png"},{code:"BD",currency:"BDT",name:"Bangladesh",flag:"/images/flags/bd.png"},{code:"NP",name:"Nepal",currency:"NPR",flag:"/images/flags/np.png"}],u=e=>{let{providerData:t,isBest:s,currency:r,t:a}=e,{provider:l,recipient_gets:o,exchange_rate:c,fee:i}=t;return(0,n.jsxs)("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",className:"block w-full p-4 mb-3 bg-white border rounded-xl shadow-sm transition-all duration-200 hover:scale-[1.02] hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ".concat(s?"border-emerald-500 border-2":"border-slate-200"),children:[(0,n.jsxs)("div",{className:"flex justify-between items-start",children:[(0,n.jsx)("h3",{className:"text-xl font-bold text-slate-800",children:l}),s&&(0,n.jsx)("span",{className:"text-xs font-semibold text-white bg-emerald-500 px-3 py-1 rounded-full",children:a("best_rate_badge")})]}),(0,n.jsxs)("div",{className:"mt-3",children:[(0,n.jsx)("p",{className:"text-sm text-slate-500",children:a("amount_to_receive")}),(0,n.jsxs)("p",{className:"text-2xl font-extrabold text-indigo-600",children:[Math.round(o).toLocaleString("en-US"),(0,n.jsx)("span",{className:"ml-2 text-xl font-bold text-slate-700",children:r})]})]}),(0,n.jsxs)("div",{className:"mt-3 text-xs text-slate-500",children:[(0,n.jsxs)("span",{children:["1 KRW ≈ ",c.toFixed(4)," ",r]}),(0,n.jsx)("span",{className:"mx-2",children:"|"}),(0,n.jsxs)("span",{children:[a("fee"),": ",i.toLocaleString()," KRW"]})]})]})},m=e=>{let{setSelectedCountry:t,setShowDropdown:s,t:r,onCountryChange:a}=e;return(0,n.jsx)("div",{className:"absolute top-full right-0 mt-2 w-[280px] h-auto max-h-[60vh] bg-white rounded-xl shadow-2xl border border-slate-100 flex flex-col overflow-hidden z-40",children:(0,n.jsx)("div",{className:"flex-1 overflow-y-auto",children:d.map(e=>(0,n.jsxs)("div",{className:"flex items-center gap-3 px-4 py-3 cursor-pointer hover:bg-gray-50 text-lg",onClick:()=>{t(e),s(!1),a(e)},children:[(0,n.jsx)("img",{src:e.flag,alt:"".concat(e.name," flag"),width:"28",height:"28",className:"rounded-full"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-bold text-sm text-slate-800",children:e.name}),(0,n.jsx)("div",{className:"text-gray-500 text-xs",children:e.currency})]})]},e.code))})})};function x(e){let{queryParams:t,t:s,onCompareAgain:l}=e,[o,c]=(0,r.useState)([]),[i,d]=(0,r.useState)(!0),[m,x]=(0,r.useState)(null);(0,r.useEffect)(()=>{t.receive_country&&(async()=>{d(!0),x(null),c([]),console.log("\uD83D\uDD25 FORCE DEBUG - Component Version:",Date.now()),console.log("\uD83D\uDD25 FORCE_API_BASE_URL:",a),console.log("\uD83D\uDD25 Query Params:",t);let e="".concat(a,"/api/getRemittanceQuote?receive_country=").concat(t.receive_country,"&receive_currency=").concat(t.receive_currency,"&send_amount=").concat(t.send_amount);if(console.log("\uD83C\uDFAF Final API URL:",e),!e.includes("sendhome.onrender.com")){console.error("\uD83D\uDEA8 CRITICAL ERROR: URL is not using correct domain!"),x("Configuration error: Invalid API URL detected"),d(!1);return}try{console.log("\uD83D\uDD0D Starting API call...");let t=await fetch(e,{method:"GET",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json",Accept:"application/json"}});if(console.log("\uD83D\uDCCA Response details:",{status:t.status,ok:t.ok,url:t.url,statusText:t.statusText}),!t.ok){let e=await t.text();throw console.error("❌ API Error Response:",e),Error("API Error: ".concat(t.status," - ").concat(t.statusText))}let s=await t.json();console.log("✅ API Success Response:",s),s.results&&s.results.length>0?c(s.results):x("No exchange rate providers available")}catch(e){console.error("\uD83D\uDEA8 Fetch Error Details:",{name:e.name,message:e.message,stack:e.stack}),e.message.includes("127.0.0.1")||e.message.includes("localhost")?x("CRITICAL: Code deployment failed. Still using localhost."):"TypeError"===e.name&&e.message.includes("Failed to fetch")?x("Network error: Cannot connect to server. Please check your internet connection."):e.message.includes("CORS")?x("CORS error: Server configuration issue."):x("API Error: ".concat(e.message))}finally{d(!1)}})()},[t]);let g=(0,r.useMemo)(()=>o&&0!==o.length?o[0]:null,[o]),h=()=>(0,n.jsxs)("div",{className:"w-full p-4 mb-3 bg-white border border-slate-200 rounded-xl shadow-sm animate-pulse",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("div",{className:"h-6 bg-slate-300 rounded-md w-1/3"}),(0,n.jsx)("div",{className:"h-4 bg-slate-300 rounded-md w-1/4"})]}),(0,n.jsx)("div",{className:"mt-4 h-8 bg-slate-300 rounded-md w-1/2"}),(0,n.jsx)("div",{className:"mt-2 h-4 bg-slate-300 rounded-md w-3/4"})]});return(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsxs)("div",{className:"bg-white/80 backdrop-blur-lg p-4 rounded-2xl shadow-lg mb-6 sticky top-4 z-10",children:[(0,n.jsx)("h2",{className:"text-sm font-semibold text-slate-500",children:s("real_time_summary")}),(0,n.jsxs)("p",{className:"text-xl font-bold text-slate-800 flex items-center",children:[parseInt(t.send_amount).toLocaleString()," KRW → ",t.receive_country]}),i&&(0,n.jsx)("p",{className:"text-xs text-indigo-500 mt-1 animate-pulse",children:s("loading_text")})]}),m&&(0,n.jsxs)("div",{className:"text-center p-8 bg-red-50 border border-red-200 rounded-lg",children:[(0,n.jsx)("h3",{className:"text-xl font-bold text-red-700",children:s("error_title")}),(0,n.jsx)("p",{className:"text-red-600 mt-2 text-sm",children:m}),(0,n.jsxs)("div",{className:"mt-4 space-x-2",children:[(0,n.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition",children:"새로고침"}),(0,n.jsx)("button",{onClick:()=>{console.log("\uD83D\uDD27 Manual debug info:"),console.log("FORCE_API_BASE_URL:",a),console.log("Current URL:",window.location.href),console.log("User agent:",navigator.userAgent)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"디버그 정보"})]})]}),(0,n.jsx)("div",{className:"space-y-3",children:i?[,,,,,].fill(0).map((e,t)=>(0,n.jsx)(h,{},t)):o.map(e=>(0,n.jsx)(u,{providerData:e,isBest:g&&e.provider===g.provider,currency:t.receive_currency,t:s},e.provider))}),(0,n.jsx)("button",{onClick:l,className:"mt-8 w-full bg-slate-200 text-slate-700 font-bold py-3 px-4 rounded-lg hover:bg-slate-300 focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 transition",children:s("compare_again_button")})]})}function g(){let[e,t]=(0,r.useState)("en"),s=i(e),[c,u]=(0,r.useState)(!1),[g,h]=(0,r.useState)({}),f=(0,r.useRef)(null),[p,b]=(0,r.useState)("1000000"),[w,v]=(0,r.useState)(!1),[j,_]=(0,r.useState)(d[0]),y=(0,r.useRef)(null);return(0,r.useEffect)(()=>{console.log("\uD83D\uDEA8 MainPage Component Loaded"),console.log("\uD83D\uDEA8 FORCE_API_BASE_URL:",a),console.log("\uD83D\uDEA8 Current timestamp:",new Date().toISOString()),console.log("\uD83D\uDEA8 Window location:",window.location.href)},[]),(0,r.useEffect)(()=>{function e(e){y.current&&!y.current.contains(e.target)&&v(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[y]),(0,r.useEffect)(()=>{c&&f.current&&f.current.scrollIntoView({behavior:"smooth",block:"start"})},[c]),(0,r.useEffect)(()=>{j&&p&&c&&h({receive_country:j.name,receive_currency:j.currency,send_amount:p})},[p,j,c]),(0,n.jsx)("div",{className:"bg-[#F5F7FA] min-h-screen font-sans flex flex-col items-center pt-8 px-4",children:(0,n.jsxs)("div",{className:"w-full max-w-sm lg:max-w-3xl mx-auto",children:[(0,n.jsxs)("header",{className:"w-full flex items-center mb-10 pl-2",children:[(0,n.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M5 20L19 12L5 4V20Z",fill:"url(#paint0_linear_header_page)"}),(0,n.jsx)("defs",{children:(0,n.jsxs)("linearGradient",{id:"paint0_linear_header_page",x1:"5",y1:"4",x2:"25",y2:"24",gradientUnits:"userSpaceOnUse",children:[(0,n.jsx)("stop",{stopColor:"#4F46E5"}),(0,n.jsx)("stop",{offset:"1",stopColor:"#06B6D4"})]})})]}),(0,n.jsx)("span",{className:"text-2xl font-extrabold text-[#1E293B] ml-2",children:"SendHome"})]}),(0,n.jsxs)("main",{className:"w-full",children:[(0,n.jsx)("div",{className:"w-full",children:(0,n.jsxs)("div",{className:"bg-white rounded-[28px] shadow-2xl shadow-slate-200/60 p-6 sm:p-8 flex flex-col items-center",children:[(0,n.jsx)("h1",{className:"text-center text-slate-800 text-3xl sm:text-4xl font-extrabold mb-8 leading-tight",dangerouslySetInnerHTML:{__html:s("title")}}),(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),console.log("\uD83D\uDD25 Form submitted, API URL will be:",a),j&&p&&(h({receive_country:j.name,receive_currency:j.currency,send_amount:p}),u(!0))},className:"w-full",children:[(0,n.jsx)("label",{className:"w-full text-left text-sm font-semibold text-slate-800 mb-2 block",children:"You Send (KRW)"}),(0,n.jsxs)("div",{className:"relative w-full mb-5",ref:y,children:[(0,n.jsx)("input",{type:"text",value:parseInt(p||"0").toLocaleString(),onChange:e=>{let t=e.target.value.replace(/,/g,"");!isNaN(t)&&t.length<=10&&b(t)},className:"w-full h-16 rounded-xl bg-[#F8FAFC] border-2 border-[#E2E8F0] px-4 text-2xl font-bold focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none pr-32"}),(0,n.jsxs)("div",{className:"absolute right-2 top-2",children:[(0,n.jsxs)("button",{type:"button",className:"flex items-center justify-between gap-2 px-3 h-12 bg-white border border-[#E2E8F0] rounded-lg hover:bg-slate-50 transition-colors",onClick:()=>v(e=>!e),children:[(0,n.jsx)("img",{src:j.flag,alt:"".concat(j.name," flag"),width:28,height:28,className:"rounded-full"}),(0,n.jsx)("span",{className:"mx-1 font-semibold text-slate-800",children:j.currency}),(0,n.jsx)(l,{className:"h-4 w-4 text-slate-600"})]}),w&&(0,n.jsx)(m,{setSelectedCountry:_,setShowDropdown:v,t:s,onCountryChange:e=>{console.log("\uD83D\uDD25 Country changed to:",e.name),p&&(h({receive_country:e.name,receive_currency:e.currency,send_amount:p}),u(!0))}})]})]}),(0,n.jsx)("div",{className:"text-slate-500 text-center text-base mb-6",children:s("subtitle")}),(0,n.jsxs)("div",{className:"relative pt-10",children:[(0,n.jsx)("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-auto whitespace-nowrap",children:(0,n.jsxs)("div",{className:"relative bg-[#FEF3C7] rounded-full py-1.5 px-4",children:[(0,n.jsxs)("span",{className:"flex items-center text-slate-600 font-semibold text-sm",children:[(0,n.jsx)("span",{children:"KRW"}),(0,n.jsx)(o,{className:"h-4 w-4 mx-1.5 text-slate-500"}),(0,n.jsx)("span",{children:j.currency})]}),(0,n.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2 top-full w-0 h-0 border-l-[8px] border-l-transparent border-r-[8px] border-r-transparent border-t-[8px] border-t-[#FEF3C7]"})]})}),(0,n.jsx)("button",{type:"submit",className:"w-full h-14 rounded-xl bg-gradient-to-r from-cyan-400 to-indigo-600 text-white font-bold text-lg shadow-lg shadow-indigo-500/30 transition-all duration-200 hover:scale-105 hover:shadow-xl",children:s("compare_button")})]})]})]})}),(0,n.jsx)("div",{ref:f,className:"w-full mt-8 transition-opacity duration-500",style:{opacity:c?1:0,maxHeight:c?"2000px":"0"},children:c&&(0,n.jsx)(x,{queryParams:g,t:s,onCompareAgain:()=>{u(!1),window.scrollTo({top:0,behavior:"smooth"})}})})]})]})})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);